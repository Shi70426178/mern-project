{"ast":null,"code":"import React,{useEffect,useState}from'react';import axios from'axios';import{Link,useNavigate}from'react-router-dom';import styles from'./UserProducts.module.css';// Ensure this CSS module exists\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const UserProducts=()=>{const[products,setProducts]=useState([]);const navigate=useNavigate();useEffect(()=>{const fetchProducts=async()=>{try{const res=await axios.get('http://localhost:5000/api/products/my-products',{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setProducts(res.data);}catch(err){console.error('Error fetching user products:',err);}};fetchProducts();},[]);const handleDelete=async productId=>{try{await axios.delete(\"http://localhost:5000/api/products/\".concat(productId),{headers:{Authorization:\"Bearer \".concat(localStorage.getItem('token'))}});setProducts(products.filter(product=>product._id!==productId));}catch(err){console.error('Error deleting product:',err);}};return/*#__PURE__*/_jsxs(\"div\",{className:styles.container,children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Your Listed Products\"}),products.length>0?/*#__PURE__*/_jsx(\"div\",{className:styles.productGrid,children:products.map(product=>/*#__PURE__*/_jsxs(\"div\",{className:styles.productCard,children:[/*#__PURE__*/_jsx(\"h3\",{children:product.name}),/*#__PURE__*/_jsx(\"p\",{children:product.description}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Price: $\",product.price]}),/*#__PURE__*/_jsx(Link,{to:\"/edit-product/\".concat(product._id),className:styles.editButton,children:\"Edit\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>handleDelete(product._id),className:styles.deleteButton,children:\"Delete\"})]},product._id))}):/*#__PURE__*/_jsx(\"p\",{children:\"No products found\"})]});};export default UserProducts;","map":{"version":3,"names":["React","useEffect","useState","axios","Link","useNavigate","styles","jsx","_jsx","jsxs","_jsxs","UserProducts","products","setProducts","navigate","fetchProducts","res","get","headers","Authorization","concat","localStorage","getItem","data","err","console","error","handleDelete","productId","delete","filter","product","_id","className","container","children","length","productGrid","map","productCard","name","description","price","to","editButton","onClick","deleteButton"],"sources":["C:/mern-project/client/src/components/UserProducts.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport axios from 'axios';\r\nimport { Link, useNavigate } from 'react-router-dom';\r\nimport styles from './UserProducts.module.css'; // Ensure this CSS module exists\r\n\r\nconst UserProducts = () => {\r\n    const [products, setProducts] = useState([]);\r\n    const navigate = useNavigate();\r\n\r\n    useEffect(() => {\r\n        const fetchProducts = async () => {\r\n            try {\r\n                const res = await axios.get('http://localhost:5000/api/products/my-products', {\r\n                    headers: {\r\n                        Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                    }\r\n                });\r\n                setProducts(res.data);\r\n            } catch (err) {\r\n                console.error('Error fetching user products:', err);\r\n            }\r\n        };\r\n        fetchProducts();\r\n    }, []);\r\n\r\n    const handleDelete = async (productId) => {\r\n        try {\r\n            await axios.delete(`http://localhost:5000/api/products/${productId}`, {\r\n                headers: {\r\n                    Authorization: `Bearer ${localStorage.getItem('token')}`\r\n                }\r\n            });\r\n            setProducts(products.filter(product => product._id !== productId));\r\n        } catch (err) {\r\n            console.error('Error deleting product:', err);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div className={styles.container}>\r\n            <h2>Your Listed Products</h2>\r\n            {products.length > 0 ? (\r\n                <div className={styles.productGrid}>\r\n                    {products.map(product => (\r\n                        <div key={product._id} className={styles.productCard}>\r\n                            <h3>{product.name}</h3>\r\n                            <p>{product.description}</p>\r\n                            <p>Price: ${product.price}</p>\r\n                            <Link to={`/edit-product/${product._id}`} className={styles.editButton}>Edit</Link>\r\n                            <button onClick={() => handleDelete(product._id)} className={styles.deleteButton}>Delete</button>\r\n                        </div>\r\n                    ))}\r\n                </div>\r\n            ) : (\r\n                <p>No products found</p>\r\n            )}\r\n        </div>\r\n    );\r\n};\r\n\r\nexport default UserProducts;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}